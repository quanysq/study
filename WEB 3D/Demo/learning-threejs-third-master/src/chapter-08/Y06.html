<!DOCTYPE html>

<html>
<head>
    <title>Hello ThreeJs - Web 3D - 加载obj格式文件</title>
    <meta charset="utf-8" />
    <!--基础脚本库-->
    <script type="text/javascript" charset="utf-8" src="../../libs/three/three.js"></script>
    <!--
        TrackballControls.js
        摄像机移动控制脚本
    -->
    <script type="text/javascript" charset="utf-8" src="../../libs/three/controls/TrackballControls.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../../libs/three/loaders/OBJLoader.js"></script>
    <!--
        Stats.js
        动画帧数检测库
        检测动画运行时的帧数
        在动画运行时，该库可以在一个图片中显示画面每秒传输帧数
    -->
    <script type="text/javascript" src="../../libs/util/Stats.js"></script>
    <!--
        dat.gui.js
        用户操作界面脚本
    -->
    <script type="text/javascript" src="../../libs/util/dat.gui.js"></script>

    <script type="text/javascript" src="../js/util.js"></script>
    <script type="text/javascript" src="./js/baseLoaderScene.js"></script>

    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>
    <body>
        <div id="webgl-output"></div>

        <script type="text/javascript">
            function init() {
                var camera = initCamera(new THREE.Vector3(50, 50, 50));
                var loaderScene = new BaseLoaderScene(camera);
                camera.lookAt(new THREE.Vector3(0, 15, 0));

                var loader = new THREE.OBJLoader();
                loader.load('../../assets/models/pinecone/pinecone.obj', function (mesh) {

                    var material = new THREE.MeshLambertMaterial({
                        color: 0x5C3A21
                    });

                    // loadedMesh is a group of meshes. For 
                    // each mesh set the material, and compute the information 
                    // three.js needs for rendering.
                    mesh.children.forEach(function (child) {
                        child.material = material;
                        child.geometry.computeVertexNormals();
                        child.geometry.computeFaceNormals();
                    });

                    mesh.scale.set(120, 120, 120)

                    // call the default render loop.
                    loaderScene.render(mesh, camera);
                });
            }

            (function () {
                init();
            })();
        </script>
    </body>
</html>